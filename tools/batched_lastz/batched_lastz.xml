<tool id="batched_lastz" name="Batched LASTZ" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" profile="@PROFILE@">
    <description>: align batches of sequences</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements"/>
    <required_files>
        <include path="run_lastz_tarball.py"/>
    </required_files>
    <command detect_errors="exit_code"><![CDATA[
        python '$__tool_directory__/run_lastz_tarball.py'
            '--input=$input'
            '--output=$output'
            --parallel=\${GALAXY_SLOTS:-2}
    ]]></command>
    <inputs>
        <param argument="--input" type="data" format="tgz" label="Tarball"/>
    </inputs>
    <outputs>
        <data name="output" label="Batched LASTZ on ${on_string}" format="auto" />
    </outputs>
    <tests>
      <test expect_num_outputs="1">
        <param name="input" value="input.tgz" ftype="tgz"/>
        <output name="output" decompress="true" file="output.maf.gz" ftype="maf"/>
      </test>
    </tests>
    <help><![CDATA[
Batched LASTZ is a special version of LASTZ designed to process output of Galaxy's KegAlign tool. It outputs pairiwse alignments in a verietry of formats.

**Using this tool**

.. class:: warningmark

This tool is the second part of a two-step process for generation of paiwrise alignments. The output of this tool is alignments in a format that was specified in **Output Options** section of KegAlign tool.

**What it does**

KegAlign processes **Target** and **Query** sequences to identify highly similar regions where gapped extension will be performed to create actual alignments. The actual alignments are generated by **Batched LASTZ** that should be run on the output of this tool. 

The default output is a MAF alignment file. Other formats can be configured in *Output Options* section.  See LASTZ manual <https://lastz.github.io/lastz/#formats>`_ for description of possible formats.
    ]]></help>
    <expand macro="citations"/>
</tool>
